name: Squash
on:
  push:
    tags:
      - '**'
jobs:
  squash:
    runs-on: ubuntu-20.04
    environment: Resource Pack
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: Run PackSquash
      uses: ComunidadAylas/PackSquash-action@v4
      with:
        artifact_name: Pack
        transcode_ogg: false
    - name: Download optimized pack
      uses: actions/download-artifact@v4
      with:
        name: Pack
    - name: Create release
      uses: softprops/action-gh-release@v2
      with:
        files: pack.zip
  # release:
  #   needs: [squash]
  #   runs-on: ubuntu-20.04
  #   environment: Resource Pack
  #   steps:
  #   - name: Fetch Github Release Asset
  #     uses: dsaltares/fetch-gh-release-asset@1.1.1
  #     with:
  #       file: pack.zip
  #       target: pack.zip